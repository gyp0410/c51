C51 COMPILER V9.56.0.0   SPEAK                                                             07/21/2019 10:56:21 PAGE 1   


C51 COMPILER V9.56.0.0, COMPILATION OF MODULE SPEAK
OBJECT MODULE PLACED IN .\Objects\speak.obj
COMPILER INVOKED BY: D:\software\Keil_v5\C51\BIN\C51.EXE speak.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Lis
                    -tings\speak.lst) TABS(2) OBJECT(.\Objects\speak.obj)

line level    source

   1          #include "reg52.h"
   2          unsigned char Count;
   3          sbit _Speak =P1^5 ;  //讯响器控制角
   4          unsigned char code SONG[] ={    //祝你平安
   5          0x26,0x20,0x20,0x20,0x20,0x20,0x26,0x10,0x20,0x10,0x20,0x80,0x26,0x20,0x30,0x20,
   6          0x30,0x20,0x39,0x10,0x30,0x10,0x30,0x80,0x26,0x20,0x20,0x20,0x20,0x20,0x1c,0x20,
   7          0x20,0x80,0x2b,0x20,0x26,0x20,0x20,0x20,0x2b,0x10,0x26,0x10,0x2b,0x80,0x26,0x20,
   8          0x30,0x20,0x30,0x20,0x39,0x10,0x26,0x10,0x26,0x60,0x40,0x10,0x39,0x10,0x26,0x20,
   9          0x30,0x20,0x30,0x20,0x39,0x10,0x26,0x10,0x26,0x80,0x26,0x20,0x2b,0x10,0x2b,0x10,
  10          0x2b,0x20,0x30,0x10,0x39,0x10,0x26,0x10,0x2b,0x10,0x2b,0x20,0x2b,0x40,0x40,0x20,
  11          0x20,0x10,0x20,0x10,0x2b,0x10,0x26,0x30,0x30,0x80,0x18,0x20,0x18,0x20,0x26,0x20,
  12          0x20,0x20,0x20,0x40,0x26,0x20,0x2b,0x20,0x30,0x20,0x30,0x20,0x1c,0x20,0x20,0x20,
  13          0x20,0x80,0x1c,0x20,0x1c,0x20,0x1c,0x20,0x30,0x20,0x30,0x60,0x39,0x10,0x30,0x10,
  14          0x20,0x20,0x2b,0x10,0x26,0x10,0x2b,0x10,0x26,0x10,0x26,0x10,0x2b,0x10,0x2b,0x80,
  15          0x18,0x20,0x18,0x20,0x26,0x20,0x20,0x20,0x20,0x60,0x26,0x10,0x2b,0x20,0x30,0x20,
  16          0x30,0x20,0x1c,0x20,0x20,0x20,0x20,0x80,0x26,0x20,0x30,0x10,0x30,0x10,0x30,0x20,
  17          0x39,0x20,0x26,0x10,0x2b,0x10,0x2b,0x20,0x2b,0x40,0x40,0x10,0x40,0x10,0x20,0x10,
  18          0x20,0x10,0x2b,0x10,0x26,0x30,0x30,0x80,0x00,
  19          //路边的野花不要采
  20          0x30,0x1C,0x10,0x20,0x40,0x1C,0x10,0x18,0x10,0x20,0x10,0x1C,0x10,0x18,0x40,0x1C,
  21          0x20,0x20,0x20,0x1C,0x20,0x18,0x20,0x20,0x80,0xFF,0x20,0x30,0x1C,0x10,0x18,0x20,
  22          0x15,0x20,0x1C,0x20,0x20,0x20,0x26,0x40,0x20,0x20,0x2B,0x20,0x26,0x20,0x20,0x20,
  23          0x30,0x80,0xFF,0x20,0x20,0x1C,0x10,0x18,0x10,0x20,0x20,0x26,0x20,0x2B,0x20,0x30,
  24          0x20,0x2B,0x40,0x20,0x20,0x1C,0x10,0x18,0x10,0x20,0x20,0x26,0x20,0x2B,0x20,0x30,
  25          0x20,0x2B,0x40,0x20,0x30,0x1C,0x10,0x18,0x20,0x15,0x20,0x1C,0x20,0x20,0x20,0x26,
  26          0x40,0x20,0x20,0x2B,0x20,0x26,0x20,0x20,0x20,0x30,0x80,0x20,0x30,0x1C,0x10,0x20,
  27          0x10,0x1C,0x10,0x20,0x20,0x26,0x20,0x2B,0x20,0x30,0x20,0x2B,0x40,0x20,0x15,0x1F,
  28          0x05,0x20,0x10,0x1C,0x10,0x20,0x20,0x26,0x20,0x2B,0x20,0x30,0x20,0x2B,0x40,0x20,
  29          0x30,0x1C,0x10,0x18,0x20,0x15,0x20,0x1C,0x20,0x20,0x20,0x26,0x40,0x20,0x20,0x2B,
  30          0x20,0x26,0x20,0x20,0x20,0x30,0x30,0x20,0x30,0x1C,0x10,0x18,0x40,0x1C,0x20,0x20,
  31          0x20,0x26,0x40,0x13,0x60,0x18,0x20,0x15,0x40,0x13,0x40,0x18,0x80,0x00,
  32          };
  33          void Time0_Init()
  34          {
  35   1      TMOD = 0x01;
  36   1      IE = 0x82;
  37   1      TH0 = 0xD8;
  38   1      TL0 = 0xEF; //12MZ晶振,10ms
  39   1      }
  40          void Time0_Int() interrupt 1
  41          {
  42   1      TH0 = 0xD8;
  43   1      TL0 = 0xEF;
  44   1      Count++; //长度加1
  45   1      }
  46          /*-------------------------------------------------
  47          功能:1MS延时子程序
  48          -------------------------------------------------*/
  49          void Delay_xMs(unsigned int x)
  50          {
  51   1      unsigned int i,j;
  52   1      for( i =0;i < x;i++ )
  53   1      {
  54   2      for( j =0;j<3;j++ );
C51 COMPILER V9.56.0.0   SPEAK                                                             07/21/2019 10:56:21 PAGE 2   

  55   2      }
  56   1      }
  57          /*-------------------------------------------------
  58          功能：功能播放子程序i为播放哪一段曲目
  59          -------------------------------------------------*/
  60          void Play_Song(unsigned char i)
  61          {
  62   1      unsigned char Temp1,Temp2;
  63   1      unsigned int Addr;
  64   1      Count = 0; //中断计数器清0
  65   1      Addr = i * 217;
  66   1      while(1)
  67   1      {
  68   2      Temp1 = SONG[Addr++];
  69   2      if ( Temp1 == 0xFF ) //休止符
  70   2      {
  71   3      TR0 = 0;
  72   3      Delay_xMs(100);
  73   3      }
  74   2      else if ( Temp1 == 0x00 ) //歌曲结束符
  75   2      {
  76   3      return;
  77   3      }
  78   2      else
  79   2      {
  80   3      Temp2 = SONG[Addr++];
  81   3      TR0 = 1;
  82   3      while(1)
  83   3      {
  84   4      _Speak = ~_Speak;
  85   4      Delay_xMs(Temp1);
  86   4      if ( Temp2 == Count )
  87   4      {
  88   5      Count = 0;
  89   5      break;
  90   5      }
  91   4      }
  92   3      }
  93   2      }
  94   1      }
  95          /*-------------------------------------------------
  96          功能：主程序
  97          -------------------------------------------------*/
  98          void main()
  99          {
 100   1      Time0_Init(); //定时器0中断初始化
 101   1      while(1)
 102   1      {
 103   2      Play_Song(0); //播放
 104   2      }
 105   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    163    ----
   CONSTANT SIZE    =    407    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1       3
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.

C51 COMPILER V9.56.0.0   SPEAK                                                             07/21/2019 10:56:21 PAGE 3   


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
